{# Frontend/templates/calculators/house_affordability/index.html #}
{% extends "base.html" %}
{% from "macros/input_combo.html" import input_combo %}
{% block title %}House Affordability{% endblock %}
{% set mode = mode or "standard" %}

{% block content %}

<h1 class="text-2xl font-bold mb-4">House Affordability Calculator</h1>

<div class="flex items-center justify-between mb-6">    
    <!-- Toggle bar -->
    <div class="flex space-x-2" id="toggle-bar">

        <button
            data-mode="standard"
            hx-get="{{ url_for('calculators.house_affordability_toggle') }}"
            hx-vals='{"mode": "standard"}'
            hx-target="#calculator-section"
            hx-swap="innerHTML"
            class="toggle-btn px-4 py-2 rounded bg-blue-600 text-white"
        >
            Standard Calculator
        </button>

        <button
            data-mode="custom"
            hx-get="{{ url_for('calculators.house_affordability_toggle') }}"
            hx-vals='{"mode": "custom"}'
            hx-target="#calculator-section"
            hx-swap="innerHTML"
            class="toggle-btn px-4 py-2 rounded bg-gray-200 dark:bg-gray-700"
        >
            Customized Calculator
        </button>

    </div>
</div>

<!-- MAIN CALCULATOR SECTION (HTMX SWAPS THIS) -->
<div id="calculator-section">
    {% include "calculators/house_affordability/_standard_calculator.html" %}
</div>

<script>
document.addEventListener("click", function(e) {
    if (!e.target.classList.contains("toggle-btn")) return;

    // Remove active state from all buttons
    document.querySelectorAll(".toggle-btn").forEach(btn => {
        btn.classList.remove("bg-blue-600", "text-white");
        btn.classList.add("bg-gray-200", "dark:bg-gray-700");
    });

    // Add active state to clicked button
    e.target.classList.remove("bg-gray-200", "dark:bg-gray-700");
    e.target.classList.add("bg-blue-600", "text-white");
});
</script>

{% endblock %}
